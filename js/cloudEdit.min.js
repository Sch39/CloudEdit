$(document).ready(function(){var i=false;var a=false;var e=false;var f=false;$("#htmlToggle").on("click",function(j){j.preventDefault();d(this,"html")});$("#cssToggle").on("click",function(j){j.preventDefault();d(this,"css")});$("#jsToggle").on("click",function(j){j.preventDefault();d(this,"js")});$("#consoleToggle").on("click",function(j){j.preventDefault();$(this).toggleClass("btn-hidden");$(".console").toggle()});$("#previewToggle, #iframeClose").on("click",function(j){j.preventDefault();$("#previewToggle").toggleClass("btn-hidden");$(".preview, html, body, section, #iframeLabel, #iframeClose").toggleClass("modal-open")});function d(k,j){var l=c();if(l>1||$(k).hasClass("btn-hidden")){$(k).toggleClass("btn-hidden");$(".window."+j).toggle();g()}else{alert("You Must Have at least one Editor open")}}function g(){var j=c();var k=$(".window");if(j===3||j===0){k.css("width","33%")}else{if(j===2){k.css("width","49.5%")}else{if(j===1){k.css("width","100%")}}}}function c(){var k=3;var j=$(".window");j.each(function(l){if($(j[l]).css("display")==="none"){k-=1}});return k}function h(j){var l={html:htmlField.getValue(),style:cssField.getValue(),js:jsField.getValue()};var k="";k+='<html lang="en">\n';k+="<head>\n";k+='<meta charset="UTF-8">\n';if(f){k+='<link href="http://cdnjs.cloudflare.com/ajax/libs/normalize/3.0.1/normalize.min.css" rel="stylesheet">\n'}if(a){k+='<style type="text/less">\n'}else{k+='<style type="text/css">\n'}if(i){k+=autoprefixer({cascade:true}).process(l.style).css}else{k+=l.style}k+="\n</style>\n";k+='<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"><\/script>\n';if(e){k+='<script src="http://cdnjs.cloudflare.com/ajax/libs/modernizr/2.7.1/modernizr.min.js"><\/script>\n'}if(a){k+='<script src="http://cdnjs.cloudflare.com/ajax/libs/less.js/1.7.0/less.min.js"><\/script>\n'}k+="</head>\n";k+="<body>\n";k+=l.html;if(j){k+='<script src="js/console.min.js"><\/script>\n'}k+="\n<script>\n";k+=l.js;k+="\n<\/script>\n";k+="</body>\n";k+="</html>";return k}$("#run").on("click",function(j){j.preventDefault();var k=h(true);(document.getElementById("iframe").contentWindow.document).write(k);(document.getElementById("iframe").contentWindow.document).close()});$("#download").on("click",function(){var m=$("#download")[0];var l=h(false);var j=new Blob([l],{type:"text/plain"});var k="index.html";m.download=k;if(typeof window.webkitURL==="function"){m.href=window.webkitURL.createObjectURL(j)}else{m.href=window.URL.createObjectURL(j)}});$("#clear").on("click",function(){htmlField.setValue("<!-- Do not place html/head/body tags here.\nInsert the tags as would normally be used in your\nbody element. <script> tags ARE allowed, though\nthey're best placed at the end of your HTML -->\n");htmlField.clearSelection();cssField.setValue("");jsField.setValue("");$("#console").empty();sessionStorage.clear();(document.getElementById("iframe").contentWindow.document).write("");(document.getElementById("iframe").contentWindow.document).close()});(function(){$.contextMenu({selector:".windowGroup",items:{imports:{name:"Imports",items:{plaincss:{name:"Plain CSS [Default]",type:"radio",radio:"css",value:"plaincss",selected:true},autoprefixer:{name:"Autoprefixer",type:"radio",radio:"css",value:"autoprefixer",selected:false},less:{name:"Less CSS",type:"radio",radio:"css",value:"less",selected:false},normalize:{name:"Normalize CSS",type:"checkbox",selected:false},modernizr:{name:"Modernizr",type:"checkbox",selected:false}}},themes:{name:"Themes",items:{light:{name:"Light",items:{chrome:{name:"Chrome",callback:function(){b("chrome")}},dreamweaver:{name:"Dreamweaver",callback:function(){b("dreamweaver")}},dawn:{name:"Dawn",callback:function(){b("dawn")}},tomorrow:{name:"Tomorow",callback:function(){b("tomorrow")}},xcode:{name:"XCode",callback:function(){b("xcode")}},kuroir:{name:"Kuroir",callback:function(){b("kuroir")}},katzenmilch:{name:"KatzenMilch",callback:function(){b("katzenmilch")}}}},dark:{name:"Dark",items:{ambiance:{name:"Ambiance",callback:function(){b("ambiance")}},cloudsmidnight:{name:"Clouds Midight",callback:function(){b("clouds_midnight")}},idlefingers:{name:"Idle Fingers",callback:function(){b("idle_fingers")}},merbivore:{name:"Merbivore",callback:function(){b("merbivore")}},merbivoresoft:{name:"Merbivore Soft",callback:function(){b("merbivore_soft")}},monokai:{name:"Monokai",callback:function(){b("monokai")}},tomorrownight:{name:"Tomorrow Night",callback:function(){b("tomorrow_night")}},twilight:{name:"Twilight",callback:function(){b("twilight")}}}},"default":{name:"Default",callback:function(){b("chrome")}}}}},events:{show:function(j){var k=this;$.contextMenu.setInputValues(j,k.data())},hide:function(j){var k=this;$.contextMenu.getInputValues(j,k.data())}}})})();$("input[name*='context-menu-input']").on("click",function(){var l=$(this).val();if(l){switch(l){case"plaincss":i=false;a=false;break;case"autoprefixer":i=true;a=false;break;case"less":a=true;i=false;break}}else{var k=$(this).is(":checked");var j=event.target.name;switch(j){case"context-menu-input-modernizr":e=k;break;case"context-menu-input-normalize":f=k;break}}});function b(j){j="ace/theme/"+j;htmlField.setTheme(j);cssField.setTheme(j);jsField.setTheme(j);consoleField.setTheme(j);localStorage.setItem("theme",j)}$(".console").on("contextmenu",function(j){j.preventDefault();consoleField.setValue("")});window.onbeforeunload=function(k){k=k||window.event;var j="Your current session will be lost..";if(k){k.returnValue=j}return j}});